function frmFrontFormJS(){"use strict";function setNextPage(e){var i=jQuery(this),t=i.attr("type");"submit"!==t&&e.preventDefault();var r=i.parents("form:first"),n="",a="",l=this.name;"frm_prev_page"===l||-1!==this.className.indexOf("frm_prev_page")?n=jQuery(r).find(".frm_next_page").attr("id").replace("frm_next_p_",""):("frm_save_draft"===l||-1!==this.className.indexOf("frm_save_draft"))&&(a=1),jQuery(".frm_next_page").val(n),jQuery(".frm_saving_draft").val(a),"submit"!==t&&r.trigger("submit")}function toggleSection(){jQuery(this).parent().children(".frm_toggle_container").slideToggle("fast"),jQuery(this).toggleClass("active").children(".ui-icon-triangle-1-e, .ui-icon-triangle-1-s").toggleClass("ui-icon-triangle-1-s ui-icon-triangle-1-e")}function showFileUploadText(){this.className=this.className.replace("frm_transparent","");var e=this.parentNode.getElementsByTagName("a")[0].className;-1==e.indexOf("frm_clear_file_link")&&(e+=" frm_hidden")}function showOtherText(){var e=this.type,i=!1,t=!1;if("select-one"===e){t=!0;var r=this.options[this.selectedIndex];"frm_other_trigger"===r.className&&(i=!0)}else if("select-multiple"===e){t=!0;var n=this.options;i=!1;for(var a=0;a<n.length;a++)if("frm_other_trigger"===n[a].className&&n[a].selected){i=!0;break}}if(t){var l=jQuery(this).parent().children(".frm_other_input");l.length&&(i?l[0].className=l[0].className.replace("frm_pos_none",""):(l[0].className.indexOf("frm_pos_none")<1&&(l[0].className=l[0].className+" frm_pos_none"),l[0].value=""))}else"radio"===e?jQuery(this).is(":checked")&&(jQuery(this).closest(".frm_radio").children(".frm_other_input").removeClass("frm_pos_none"),jQuery(this).closest(".frm_radio").siblings().children(".frm_other_input").addClass("frm_pos_none").val("")):"checkbox"===e&&(this.checked?jQuery(this).closest(".frm_checkbox").children(".frm_other_input").removeClass("frm_pos_none"):jQuery(this).closest(".frm_checkbox").children(".frm_other_input").addClass("frm_pos_none").val(""))}function maybeCheckDependent(e){var i=getFieldId(this);if(i&&"undefined"!=typeof i){var t="reset";if(e.frmTriggered){if(e.frmTriggered==i)return;t="persist"}checkDependentField(i,null,jQuery(this),t),doCalculation(i,jQuery(this))}}function getFieldId(e,i){var t="";t=e instanceof jQuery?e.attr("name"):e.name;var r=t.replace("item_meta[","").replace("[]","").split("]");if(r.length<1)return 0;r=r.filter(function(e){return""!==e});var n=r[0],a=!1;return 1===r.length?n:(jQuery('input[name="item_meta['+n+'][form]"]').length&&(n=r[2].replace("[",""),a=!0),"other"===n&&(n=a?r[3].replace("[",""):r[1].replace("[","")),i===!0&&(n=n+"-"+r[0]+"-"+r[1].replace("[","")),n)}function checkDependentField(e,i,t,r){var n=getRulesForField(e);if("undefined"!=typeof n){("undefined"==typeof i||null===i)&&(i="go"),"persist"!==r&&(show_fields=[],hidden_fields=[]);for(var a=maybeSetRowId(t),l=n.length,d=0,o=l;o>d;d++)n[d].FieldName===e?hideOrShowField(d,n[d],i,t):hideOrShowField(d,n[d],i),d===l-1&&(hideFieldLater(i),a&&(addingRow=""))}}function maybeSetRowId(e){var i=!1;if(""===addingRow&&"undefined"!=typeof e&&null!==e){e=maybeGetFirstElement(e);var t=e.closest(".frm_repeat_sec, .frm_repeat_inline, .frm_repeat_grid");"undefined"!=typeof t&&"undefined"!=typeof t.attr("id")&&(addingRow=t.attr("id"),i=!0)}return i}function getHelpers(){var e=document.getElementById("frm_helpers").value;return e=e?JSON.parse(e):new Array}function getRulesForField(e){if("undefined"!=typeof __FRMRULES&&"undefined"!=typeof __FRMRULES[e]){var i=compileRules(__FRMRULES[e]);return i}}function compileRules(e){for(var i=[],t=0,r=e.length;r>t;t++){var n=e[t];if("undefined"!=typeof n)for(var a=0,l=n.Conditions.length;l>a;a++){var d=n.Conditions[a];d.HideField=n.Setting.FieldName,d.MatchType=n.MatchType,d.Show=n.Show,i.push(d)}}return i}function hideOrShowField(e,i,t,r){if(i.inputName="item_meta["+i.FieldName+"]",i.hiddenName="item_meta["+i.HideField+"]",i.containerID="frm_field_"+i.FieldName+"_container",i.hideContainerID="frm_field_"+i.HideField+"_container",""!==addingRow)return void checkRepeatingFieldInSingleRow(e,i,t,addingRow);if(("undefined"==typeof r||null===r)&&(r=jQuery('input[name^="'+i.inputName+'"], textarea[name^="'+i.inputName+'"], select[name^="'+i.inputName+'"]'),r.length<1))return void checkLogicForTwoRepeatingFields(e,i,t);var n=getBasicEnteredValue(i);return isRepeatingField(i.HideField)?void checkLogicForRepeatingHideField(e,i,n,t):(setEmptyKeyInShowFieldsArray(i),updateShowFields(e,i,n),void hideFieldNow(e,i,t))}function checkRepeatingFieldInSingleRow(e,i,t,r){isRepeatingField(i.FieldName)&&(i.inputName=getRepeatingFieldName(i.FieldName,r,i.Type),i.containerID=getRepeatingFieldHtmlId(i.FieldName,r)),i.hideContainerID=getRepeatingFieldHtmlId(i.HideField,r);var n=getBasicEnteredValue(i);setEmptyKeyInShowFieldsArray(i),updateShowFields(e,i,n),hideFieldNow(e,i,t)}function getRepeatingFieldName(e,i){if(i.indexOf("frm_section")>-1)var t=i.replace("frm_section_","").split("-"),r="item_meta["+t[0]+"]["+t[1]+"]["+e+"]";else var n=i.replace("frm_field_","").replace("_container","").split("-"),r="item_meta["+n[1]+"]["+n[2]+"]["+e+"]";return r}function getRepeatingFieldHtmlId(e,i){var t=i.replace("frm_section_","").split("-"),r="frm_field_"+e+"-"+t[0]+"-"+t[1]+"_container";return r}function maybeGetFirstElement(e){return e.length>1&&(e=e.eq(0)),e}function isRepeatingField(e){var i=document.getElementById("frm_field_"+e+"_container");return"undefined"==typeof i||null===i?!0:!1}function checkLogicForTwoRepeatingFields(e,i,t){for(var r=document.getElementsByClassName("frm_field_"+i.FieldName+"_container"),n=0;n<r.length;n++){i.inputName=getRepeatingFieldName(i.FieldName,r[n].id,i.Type),i.containerID=r[n].id,i.hideContainerID=r[n].id.replace(i.FieldName,i.HideField);var a=getBasicEnteredValue(i);setEmptyKeyInShowFieldsArray(i),updateShowFields(e,i,a),hideFieldNow(e,i,t)}}function checkLogicForRepeatingHideField(e,i,t,r){for(var n=document.getElementsByClassName("frm_field_"+i.HideField+"_container"),a=0;a<n.length;a++)i.hideContainerID=n[a].id,setEmptyKeyInShowFieldsArray(i),updateShowFields(e,i,t),hideFieldNow(e,i,r)}function getBasicEnteredValue(e){var i="";if("checkbox"===e.Type||"data-checkbox"===e.Type){var t=getCheckedVal(e.containerID,e.inputName);return i=t.length?t:""}return i=jQuery('input[name="'+e.inputName+'"][type="hidden"]').val(),"undefined"!=typeof i?i:(i="radio"==e.Type||"data-radio"===e.Type?jQuery('input[name="'+e.inputName+'"]:checked').val():"select"===e.Type||"data-select"===e.Type?jQuery('select[name="'+e.inputName+'"]').val():jQuery('input[name="'+e.inputName+'"]').val(),"undefined"==typeof i&&(i=""),i)}function setEmptyKeyInShowFieldsArray(e){"undefined"==typeof show_fields[e.hideContainerID]&&(show_fields[e.hideContainerID]=[])}function updateShowFields(e,i,t){show_fields[i.hideContainerID][e]=null===t||""===t||t.length<1?!1:{funcName:"getDataOpts",f:i,sel:t},"checkbox"===i.Type||"data-checkbox"===i.Type&&"undefined"==typeof i.LinkedField?updateShowFieldsForCheckbox(e,i,t):"undefined"!=typeof i.LinkedField&&0===i.Type.indexOf("data-")?updateShowFieldsForDynamicField(e,i,t):"undefined"==typeof i.Value&&0===i.Type.indexOf("data")?(i.Value=""===t?"1":t,show_fields[i.hideContainerID][e]=operators(i.Condition,i.Value,t),i.Value=void 0):show_fields[i.hideContainerID][e]=operators(i.Condition,i.Value,t)}function updateShowFieldsForCheckbox(e,i,t){show_fields[i.hideContainerID][e]=!1;var r=!1;if(""!==t){"!="===i.Condition&&(show_fields[i.hideContainerID][e]=!0);for(var n=0;n<t.length;n++)r=operators(i.Condition,i.Value,t[n]),"!="===i.Condition?show_fields[i.hideContainerID][e]===!0&&r===!1&&(show_fields[i.hideContainerID][e]=!1):show_fields[i.hideContainerID][e]===!1&&r&&(show_fields[i.hideContainerID][e]=!0)}else r=operators(i.Condition,i.Value,""),show_fields[i.hideContainerID][e]===!1&&r&&(show_fields[i.hideContainerID][e]=!0)}function updateShowFieldsForDynamicField(e,i,t){("undefined"==typeof i.DataType||"data"===i.DataType)&&(""===t?hideAndClearDynamicField(i.hideContainerID,i.HideField,"hide"):"data-radio"===i.Type?show_fields[i.hideContainerID][e]="undefined"==typeof i.DataType?operators(i.Condition,i.Value,t):{funcName:"getData",f:i,sel:t}:"data-checkbox"===i.Type||"data-select"===i.Type&&isNotEmptyArray(t)?(hideAndClearDynamicField(i.hideContainerID,i.HideField,"show"),show_fields[i.hideContainerID][e]=!0,getData(i,t,1)):"data-select"===i.Type&&(show_fields[i.hideContainerID][e]={funcName:"getData",f:i,sel:t}))}function hideAndClearDynamicField(e,i,t){-1===jQuery.inArray(e,hidden_fields)&&(hidden_fields[i]=e,e=jQuery(document.getElementById(e)),"hide"===t&&e.hide(),e.find(".frm_data_field_container").empty())}function hideFieldAndClearValue(e,i){if(e.hide(),-1===jQuery.inArray(e.attr("id"),hidden_fields)){var t=i.HideField;hidden_fields[t]=e.attr("id");var r=getInputsInContainer(e);if(r.length){r.prop("checked",!1).prop("selectedIndex",0),r.not(":checkbox, :radio, select").val("");var n=!1;r.each(function(){if("SELECT"==this.tagName){var e=document.getElementById(this.id+"_chosen");null!==e&&jQuery(this).trigger("chosen:updated")}(n===!1||["checkbox","radio"].indexOf(this.type)<0)&&triggerChange(jQuery(this)),n=!0})}}}function getInputsInContainer(e){return e.find('select[name^="item_meta"], textarea[name^="item_meta"], input[name^="item_meta"]:not([type=hidden])')}function addToHideFields(e){var i=document.getElementById("frm_hide_fields"),t=i.value;t=t?JSON.parse(t):new Array,t.indexOf(e)>-1||(t.push(e),t=JSON.stringify(t),i.value=t)}function removeFromHideFields(e){var i=document.getElementById("frm_hide_fields"),t=i.value;if(t){t=JSON.parse(t);var r=t.indexOf(e);r>-1&&(t.splice(r,1),t=JSON.stringify(t),i.value=t)}}function showFieldAndSetValue(e){var i=getInputsInContainer(e);if(i.length)for(var t=0;t<i.length;t++)setDefaultValue(jQuery(i[t])),doCalcForSingleField(i[t]);e.show()}function setDefaultValue(e){var i=e.length;if(e.is(":checkbox, :radio")){if(e.is(":checked"))return}else if(e.val())return;if(i)for(var t=0,r=i;r>t;t++){var n=jQuery(e[t]),a=n.data("frmval");"undefined"!=typeof a&&(n.is(":checkbox, :radio")?(n.val()==a||jQuery.isArray(a)&&-1!==jQuery.inArray(n.val(),a))&&(n.prop("checked",!0),triggerChange(n)):(n.val(a),triggerChange(n)))}}function triggerChange(e,i){"undefined"==typeof i&&(i="dependent"),e.length>1&&(e=e.eq(0)),e.trigger({type:"change",selfTriggered:!0,frmTriggered:i})}function hideFieldNow(e,i,t){if("all"===i.MatchType||show_fields[i.hideContainerID][e]===!1)return void hide_later.push({result:show_fields[i.hideContainerID][e],show:i.Show,match:i.MatchType,FieldName:i.FieldName,HideField:i.HideField,hideContainerID:i.hideContainerID});var r="none";if("show"===i.Show){if(show_fields[i.hideContainerID][e]!==!0)return void showField(show_fields[i.hideContainerID][e],i.FieldName,t);r=""}var n;n=jQuery(document.getElementById(i.hideContainerID)),n.length&&("none"===r?(hideFieldAndClearValue(n,i),addToHideFields(n.attr("id"))):(showFieldAndSetValue(n,i),removeFromHideFields(n.attr("id"))))}function hideFieldLater(e){jQuery.each(hide_later,function(i,t){if(delete hide_later[i],"undefined"!=typeof t&&"undefined"!=typeof t.result){var r=jQuery("#"+t.hideContainerID),n=t.show;r.length&&(("any"===t.match&&-1===jQuery.inArray(!0,show_fields[t.hideContainerID])||"all"===t.match&&jQuery.inArray(!1,show_fields[t.hideContainerID])>-1)&&(n="show"===t.show?"hide":"show"),"show"===n?(showFieldAndSetValue(r,t),removeFromHideFields(r.attr("id")),typeof t.result!==!1&&typeof t.result!==!0&&showField(t.result,t.FieldName,e)):(hideFieldAndClearValue(r,t),addToHideFields(r.attr("id"))))}})}function operators(e,i,t){if("undefined"==typeof t&&(t=""),jQuery.isArray(t)&&jQuery.inArray(i,t)>-1&&(t=i),-1!==String(i).search(/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/)&&(i=parseFloat(i),t=parseFloat(t)),"-1"!=String(i).indexOf("&quot;")&&operators(e,i.replace("&quot;",'"'),t))return!0;var r={"==":function(e,i){return e==i},"!=":function(e,i){return e!=i},"<":function(e,i){return e>i},">":function(e,i){return i>e},LIKE:function(e,i){return i?-1!=i.indexOf(e):0},"not LIKE":function(e,i){return i?-1==i.indexOf(e):1}};return r[e](i,t)}function showField(e,i,t){"getDataOpts"==e.funcName?getDataOpts(e.f,e.sel,i,t):"getData"==e.funcName&&getData(e.f,e.sel,0)}function getData(e,i,t){var r=document.getElementById(e.hideContainerID),n=jQuery(r).find(".frm_data_field_container");return 0===n.length?!0:(t||n.html('<span class="frm-loading-img"></span>'),void jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_fields_ajax_get_data",entry_id:i,field_id:e.LinkedField,current_field:e.HideField,hide_id:e.hideContainerID,nonce:frm_js.nonce},success:function(e){t?n.append(e):n.html(e);var i=n.children("input"),a=i.val();return r.style.display=""===e&&!t||""===a?"none":"",triggerChange(i),!0}}))}function getDataOpts(e,i,t,r){if(!("stop"==r&&jQuery.inArray(e.HideField,frm_checked_dep)>-1&&e.parentField&&"hidden"==e.parentField.attr("type"))){var n=jQuery('input[name^="'+e.hiddenName+'"], select[name^="'+e.hiddenName+'"]:not(":disabled"), textarea[name^="'+e.hiddenName+'"]'),a=[];if(n.each(function(){"radio"===this.type||"checkbox"===this.type?this.checked===!0&&a.push(jQuery(this).val()):a.push(jQuery(this).val())}),"select"!=e.DataType||"stop"!=r&&!jQuery("#"+e.hideContainerID+" .frm-loading-img").length||!(jQuery.inArray(e.HideField,frm_checked_dep)>-1)){0===a.length&&(a=""),frm_checked_dep.push(e.HideField);var l=document.getElementById(e.hideContainerID),d=jQuery(l).find(".frm_data_field_container");if(0===d.length&&n.length)return checkDependentField(e.HideField,"stop",n),!1;if(""!==e.Value){var o=operators(e.Condition,e.Value,i);if(!o)return l.style.display="none",d.html(""),checkDependentField(e.HideField,"stop",n),!1}d.html('<span class="frm-loading-img" style="visibility:visible;display:inline;"></span>');var f=(e.hiddenName,e.DataType);jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_fields_ajax_data_options",hide_field:t,entry_id:i,selected_field_id:e.LinkedField,field_id:e.HideField,hide_id:e.hideContainerID,nonce:frm_js.nonce},success:function(i){d.html(i);var t=d.find("select, input, textarea"),r=1;if("hidden"==t.attr("type")&&(r=t.val()),""===i||""===r?(l.style.display="none",a=""):"all"!=e.MatchType&&(l.style.display=""),""!==i&&""!==a){if(!jQuery.isArray(a)){var n=[];n.push(a),a=n}jQuery.each(a,function(e,i){if("undefined"!=typeof i&&""!==i)if("checkbox"==f||"radio"==f)t.length>1?t.filter('[value="'+i+'"]').attr("checked","checked"):t.val()==i&&t.attr("checked","checked");else if("select"==f){var r=t.children('option[value="'+i+'"]');r.length?r.prop("selected",!0):a.splice(e,1)}else t.val(i)})}t.hasClass("frm_chzn")&&jQuery().chosen&&jQuery(".frm_chzn").chosen({allow_single_deselect:!0}),triggerChange(t)}})}}}function doCalculation(e,i){if("undefined"!=typeof __FRMCALC){var t=__FRMCALC,r=t.fields[e];if("undefined"!=typeof r)for(var n=r.total,a=n.length,l=[],d=0,o=a;o>d;d++)fieldIsConditionallyHidden(t.calc[n[d]].field_id)||doSingleCalculation(t,n[d],l,i)}}function fieldIsConditionallyHidden(e){var i=document.getElementById("frm_hide_fields").value;if(!i)return!1;if(i=JSON.parse(i),i.indexOf("frm_field_"+e+"_container")>-1)return!0;var t=getHelpers();return t&&null!=t[e]&&i.indexOf("frm_field_"+t[e]+"_container")>-1?!0:!1}function doSingleCalculation(all_calcs,field_key,vals,triggerField){var thisCalc=all_calcs.calc[field_key],thisFullCalc=thisCalc.calc,totalField=jQuery(document.getElementById("field_"+field_key)),fieldInfo={triggerField:triggerField,inSection:!1,thisFieldCall:'input[id^="field_'+field_key+'-"]'};totalField.length<1&&"undefined"!=typeof triggerField&&(fieldInfo.inSection=!0,fieldInfo.thisFieldId=objectSearch(all_calcs.fieldsWithCalc,field_key),totalField=getSiblingField(fieldInfo)),thisFullCalc=getValsForSingleCalc(thisCalc,thisFullCalc,all_calcs,vals,fieldInfo);var dec=thisCalc.calc_dec;if(thisFullCalc.indexOf(").toFixed(")){var calcParts=thisFullCalc.split(").toFixed(");isNumeric(calcParts[1])&&(dec=calcParts[1],thisFullCalc=thisFullCalc.replace(").toFixed("+dec,""))}var total=parseFloat(eval(thisFullCalc));"undefined"==typeof total&&(total=0),isNumeric(dec)&&(total=total.toFixed(dec)),totalField.val()!=total&&(totalField.val(total),triggerChange(totalField,field_key))}function getValsForSingleCalc(e,i,t,r,n){for(var a=e.fields.length,l=0,d=a;d>l;l++){var o={triggerField:n.triggerField,thisFieldId:e.fields[l],inSection:n.inSection,valKey:n.inSection+""+e.fields[l],thisField:t.fields[e.fields[l]],thisFieldCall:"input"+t.fieldKeys[e.fields[l]]};o=getCallForField(o,t),r=getCalcFieldId(o,t,r),("undefined"==typeof r[o.valKey]||isNaN(r[o.valKey]))&&(r[o.valKey]=0);var f="["+o.thisFieldId+"]";f=f.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),i=i.replace(new RegExp(f,"g"),r[o.valKey])}return i}function getCallForField(e,i){return"checkbox"==e.thisField.type||"select"==e.thisField.type?e.thisFieldCall=e.thisFieldCall+":checked,select"+i.fieldKeys[e.thisFieldId]+" option:selected,"+e.thisFieldCall+"[type=hidden]":"radio"==e.thisField.type||"scale"==e.thisField.type?e.thisFieldCall=e.thisFieldCall+":checked,"+e.thisFieldCall+"[type=hidden]":"textarea"==e.thisField.type&&(e.thisFieldCall=e.thisFieldCall+",textarea"+i.fieldKeys[e.thisFieldId]),e}function doCalcForSingleField(e){if("undefined"!=typeof __FRMCALC){var i=__FRMCALC,t=e.id.replace("field_","");if(void 0!==i.calc[t]){var r=[];doSingleCalculation(i,t,r,null)}}}function getCalcFieldId(e,i,t){if("undefined"!=typeof t[e.valKey]&&0!==t[e.valKey])return t;t[e.valKey]=0;var r;return e.inSection===!1?r=jQuery(e.thisFieldCall):(r=getSiblingField(e),(null===r||"undefined"==typeof r)&&(r=jQuery(e.thisFieldCall))),null===r||"undefined"==typeof r||r.length<1?t:(r.each(function(){var r=getOptionValue(e.thisField,this);if("date"==e.thisField.type){var n=getDateFieldValue(i.date,r);null!==n&&(t[e.valKey]=Math.ceil(n/864e5))}else{var a=r;""!==a&&0!==a&&(a=a.trim(),a=parseFloat(a.replace(/,/g,"").match(/-?[\d\.]+$/))),("undefined"==typeof a||isNaN(a)||""===a)&&(a=0),t[e.valKey]+=a}}),t)}function getDateFieldValue(e,i){if(i)if("undefined"==typeof jQuery.datepicker){if(e.indexOf("/")>-1)var t=e.split("/"),r=i.split("/");else var t=e.split("-"),r=i.split("-");var n,a,l;n=a=l="";for(var d=0;d<t.length;d++)if("y"==t[d]){var o=(new Date).getFullYear()+15,f=o.toString().substr(2,2);n=r[d]>f?"19"+r[d]:"20"+r[d]}else"yy"==t[d]?n=r[d]:"m"==t[d]||"mm"==t[d]?(a=r[d],a.length<2&&(a="0"+a)):("d"==t[d]||"dd"==t[d])&&(l=r[d],l.length<2&&(l="0"+l));var s=Date.parse(n+"-"+a+"-"+l)}else var s=jQuery.datepicker.parseDate(e,i);else var s=0;return s}function getSiblingField(e){if("undefined"==typeof e.triggerField)return null;var i=e.triggerField.closest(".frm_repeat_sec, .frm_repeat_inline, .frm_repeat_grid");if(i.length){var t=e.thisFieldCall.replace("[id=","[id^=");return i.find(t)}return null}function getOptionValue(e,i){var t;return t=isOtherOption(e,i)?getOtherValueAnyField(e,i):"checkbox"!==i.type&&"radio"!==i.type||!i.checked?jQuery(i).val():i.value,"undefined"==typeof t&&(t=""),t}function isOtherOption(e,i){var t=!1;if("hidden"==i.type)""!==getOtherValueLimited(i)&&(t=!0);else if("select"==e.type){var r=i.className;r&&r.indexOf("frm_other_trigger")>-1&&(t=!0)}else("checkbox"==e.type||"radio"==e.type)&&i.id.indexOf("-other_")>-1&&i.id.indexOf("-otext")<0&&(t=!0);return t}function getOtherValueLimited(e){var i="",t=document.getElementById(e.id+"-otext");return null!==t&&""!==t.value&&(i=t.value),i}function getOtherValueAnyField(e,i){var t=0;return"select"==e.type?"hidden"==i.type?isCurrentOptRepeating(i)||(t=getOtherValueLimited(i)):t=getOtherSelectValue(i):("checkbox"==e.type||"radio"==e.type)&&("hidden"==i.type||(t=getOtherValueLimited(i))),t}function isCurrentOptRepeating(e){var i=!1,t=e.name.split("[");return t.length>2&&(i=!0),i}function getOtherSelectValue(e){return jQuery(e).closest(".frm_other_container").find(".frm_other_input").val()}function validateForm(e,i){var t=[],r=jQuery(i).find(".frm_required_field input, .frm_required_field select, .frm_required_field textarea");if(r.length)for(var n=0,a=r.length;a>n;n++)t=checkRequiredField(r[n],t);var l=jQuery(i).find("input[type=email]");if(l.length)for(var d=0,o=l.length;o>d;d++)t=checkEmailField(l[d],t,l);var f=jQuery(i).find("input[type=number]");if(f.length)for(var s=0,c=f.length;c>s;s++)t=checkNumberField(f[s],t);return t}function validateField(e,i){var t=[],r=jQuery(i).closest(".frm_form_field");if(r.hasClass(".frm_required_field")&&(t=checkRequiredField(i,t)),t.length<1&&"email"==i.type){var n=jQuery(i).closest("form").find("input[type=email]");t=checkEmailField(i,t,n)}if(Object.keys(t).length>0)for(var a in t)addFieldError(r,a,t);else removeFieldError(r)}function checkRequiredField(e,i,t){return""===jQuery(e).val()&&(t=getFieldId(e,!0),i[t]=""),i}function checkEmailField(e,i,t){var r=e.value,n=getFieldId(e,!0),a=0===n.indexOf("conf_");if(""!==r||a){var l=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(l.test(r)===!1)i[n]="",a&&(i[n.replace("conf_","")]="");else if(a){var d=e.name.replace("conf_",""),o=t.filter('[name="'+d+'"]').val();o!==r&&(i[n]="",i[n.replace("conf_","")]="")}}return i}function checkNumberField(e,i){var t=e.value;if(isNaN(t/1)!==!1){var r=getFieldId(e,!0);i[r]=""}return i}function checkDateField(e,i){return i}function getFormErrors(e,i){jQuery(e).find('input[type="submit"], input[type="button"]').attr("disabled","disabled"),jQuery(e).find(".frm_ajax_loading").addClass("frm_loading_now"),"undefined"==typeof i&&jQuery(e).find('input[name="frm_action"]').val(),jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:jQuery(e).serialize()+"&action=frm_entries_"+i+"&nonce="+frm_js.nonce,success:function(i){if(i=i.replace(/^\s+|\s+$/g,""),0===i.indexOf("{")&&(i=jQuery.parseJSON(i)),""===i||!i||"0"===i||"object"!=typeof i&&0===i.indexOf("<!DOCTYPE")){var t=document.getElementById("frm_loading");if(null!==t){var r=jQuery(e).find("input[type=file]").val();"undefined"!=typeof r&&""!==r&&setTimeout(function(){jQuery(t).fadeIn("slow")},2e3)}var n=jQuery(e).find(".g-recaptcha");n.length&&(jQuery(e).find(".frm_next_page").length<1||jQuery(e).find(".frm_next_page").val()<1)&&n.closest(".frm_form_field").replaceWith('<input type="hidden" name="recaptcha_checked" value="'+frm_js.nonce+'">'),e.submit()}else if("object"!=typeof i){jQuery(e).find(".frm_ajax_loading").removeClass("frm_loading_now");var a=jQuery(e).find('input[name="form_id"]').val();if(jQuery(e).closest("#frm_form_"+a+"_container").replaceWith(i),frmFrontForm.scrollMsg(a),"function"==typeof frmThemeOverride_frmAfterSubmit){var l=jQuery('input[name="frm_page_order_'+a+'"]').val(),d=jQuery(i).find('input[name="form_id"]').val();frmThemeOverride_frmAfterSubmit(d,l,i,e)}var o=jQuery(e).find('input[name="id"]');o.length&&jQuery(document.getElementById("frm_edit_"+o.val())).find("a").addClass("frm_ajax_edited").click()}else{jQuery(e).find('input[type="submit"], input[type="button"]').removeAttr("disabled"),jQuery(e).find(".frm_ajax_loading").removeClass("frm_loading_now");var f=!0;jQuery(".form-field").removeClass("frm_blank_field"),jQuery(".form-field .frm_error").replaceWith("");var s="",c=!1,u=null;for(var m in i)if(u=jQuery(e).find(jQuery(document.getElementById("frm_field_"+m+"_container"))),u.length){if(!u.is(":visible")){var p=u.closest(".frm_toggle_container");p.length&&p.prev(".frm_trigger").click()}if(u.is(":visible")){f=!1,""===s&&(frmFrontForm.scrollMsg(m,e,!0),s="#frm_field_"+m+"_container");var h=jQuery(e).find("#frm_field_"+m+"_container .g-recaptcha");h.length&&(c=!0,grecaptcha.reset()),addFieldError(u,m,i)}}else if("redirect"==m)return void(window.location=i[m]);c!==!0&&jQuery(e).find(".g-recaptcha").closest(".frm_form_field").replaceWith('<input type="hidden" name="recaptcha_checked" value="'+frm_js.nonce+'">'),f&&e.submit()}},error:function(){jQuery(e).find('input[type="submit"], input[type="button"]').removeAttr("disabled"),e.submit()}})}function addFieldError(e,i,t){e.length&&e.is(":visible")&&(e.addClass("frm_blank_field"),"function"==typeof frmThemeOverride_frmPlaceError?frmThemeOverride_frmPlaceError(i,t):e.append('<div class="frm_error">'+t[i]+"</div>"))}function removeFieldError(e){e.removeClass("frm_blank_field"),e.find(".frm_error").remove()}function clearDefault(){toggleDefault(jQuery(this),"clear")}function replaceDefault(){toggleDefault(jQuery(this),"replace")}function toggleDefault(e,i){var t=e.data("frmval").replace(/(\n|\r\n)/g,"\r");if(""===t||"undefined"==typeof t)return!1;var r=e.val().replace(/(\n|\r\n)/g,"\r");"replace"==i?""===r&&e.addClass("frm_default").val(t):r==t&&e.removeClass("frm_default").val("")}function resendEmail(){var e=jQuery(this),i=e.data("eid"),t=e.data("fid");return e.append('<span class="spinner" style="display:inline"></span>'),jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_send_email",entry_id:i,form_id:t,nonce:frm_js.nonce},success:function(i){e.replaceWith(i)}}),!1}function prepareGraphTypes(e,i){for(var t=0;t<e.length;t++)prepareGraphs(e[t],i)}function prepareGraphs(e,i){google.load("visualization","1.0",{packages:[i],callback:function(){"table"==i?compileGoogleTable(e):compileGraph(e)}})}function compileGoogleTable(e){var i=new google.visualization.DataTable,t=!1;-1!==jQuery.inArray("id",e.options.fields)&&(t=!0,i.addColumn("number",frm_js.id));for(var r=e.fields.length,n="string",a=0,l=r;l>a;a++){var d=e.fields[a];n=getGraphType(d),i.addColumn(n,d.name)}var o=!1;e.options.edit_link&&(o=!0,i.addColumn("string",e.options.edit_link));var f=!1;e.options.delete_link&&(f=!0,i.addColumn("string",e.options.delete_link));var s=0;if(null!==e.entries){var c=e.entries.length;i.addRows(c);for(var u=0,m=0,p=c;p>m;m++){s=0;var h=e.entries[m];t&&(i.setCell(u,s,h.id),s++);for(var _=0,y=r;y>_;_++){var g=e.fields[_];n=getGraphType(g);var v=h.metas[g.id];"number"!=n||null!==v&&""!==v?"boolean"==n&&(v=null===v||"false"==v||v===!1?!1:!0):v=0,i.setCell(u,s,v),s++}o&&("undefined"!=typeof h.editLink?i.setCell(u,s,'<a href="'+h.editLink+'">'+e.options.edit_link+"</a>"):i.setCell(u,s,""),s++),f&&("undefined"!=typeof h.deleteLink?i.setCell(u,s,'<a href="'+h.deleteLink+'" class="frm_delete_link" onclick="return confirm('+e.options.confirm+')">'+e.options.delete_link+"</a>"):i.setCell(u,s,"")),u++}}else for(i.addRows(1),s=0,a=0,l=r;l>a;a++)s>0?i.setCell(0,s,""):i.setCell(0,s,e.options.no_entries),s++;var F=new google.visualization.Table(document.getElementById("frm_google_table_"+e.options.form_id));F.draw(i,e.graphOpts)}function getGraphType(e){var i="string";if("number"==e.type)i="number";else if("checkbox"==e.type||"select"==e.type){var t=e.options.length;"select"==e.type&&""===e.options[0]&&("post_status"==e.field_options.post_field?t=3:t-=1),1==t&&(i="boolean")}return i}function compileGraph(e){var i=new google.visualization.DataTable,t=!1,r=!1,n=e.rows.length;if(n>0)if("table"==e.type){t=!0;var a=e.rows[n-1],l=a[0]+1;i.addRows(l);for(var d=0,o=n;o>d;d++)i.setCell(e.rows[d])}else{var f=e.rows[0];if("undefined"!=typeof f.tooltip){t=!0,r=!0;for(var s=0,c=n;c>s;s++){var u=e.rows[s].tooltip;delete e.rows[s].tooltip;var m=Object.keys(e.rows[s]).map(function(i){return e.rows[s][i]});e.rows[s]=m,e.rows[s].push(u)}}}var p=e.cols.length;if(t){if(p>0)for(var h=0,_=p;_>h;h++){var y=e.cols[h];i.addColumn(y.type,y.name)}r&&(i.addColumn({type:"string",role:"tooltip"}),i.addRows(e.rows))}else{var g=[];g[0]=[];for(var v=0,F=p;F>v;v++)g[0].push(e.cols[v].name);g=g.concat(e.rows),i=google.visualization.arrayToDataTable(g)}var j=e.type.charAt(0).toUpperCase()+e.type.slice(1)+"Chart",Q=new google.visualization[j](document.getElementById("chart_"+e.graph_id));Q.draw(i,e.options)}function nextUpload(){var e=jQuery(this),i=e.data("fid");e.wrap('<div class="frm_file_names frm_uploaded_files">');for(var t=e.get(0).files,r=0;r<t.length;r++)e.after(0===r?t[r].name+' <a href="#" class="frm_clear_file_link">'+frm_js.remove+"</a>":t[r].name+"<br/>");e.hide();var n="file"+i,a=e.attr("name");if(a!="item_meta["+i+"][]"){var l=a.replace("item_meta[","").replace("[]","").split("][");3==l.length&&(n=n+"-"+l[1])}e.closest(".frm_form_field").find(".frm_uploaded_files:last").after('<input name="'+a+'" data-fid="'+i+'"class="frm_transparent frm_multiple_file" multiple="multiple" type="file" />')}function removeDiv(){fadeOut(jQuery(this).parent(".frm_uploaded_files"))}function clearFile(){return jQuery(this).parent(".frm_file_names").replaceWith(""),!1}function removeRow(){var e="frm_section_"+jQuery(this).data("parent")+"-"+jQuery(this).data("key"),i=jQuery(document.getElementById(e)),t=i.find("input, select, textarea");return i.fadeOut("slow",function(){i.remove(),t.each(function(){if("file"!=this.type){var e=this.name.replace("item_meta[","").split("]")[2].replace("[","");doCalculation(e,jQuery(this))}})}),!1}function addRow(){var e=jQuery(this).data("parent"),i=0;return jQuery(".frm_repeat_"+e).length>0&&(i=1+parseInt(jQuery(".frm_repeat_"+e+":last").attr("id").replace("frm_section_"+e+"-","")),"undefined"==typeof i&&(i=1)),jQuery.ajax({type:"POST",url:frm_js.ajax_url,dataType:"json",data:{action:"frm_add_form_row",field_id:e,i:i,nonce:frm_js.nonce},success:function(i){var t=i.html,r=jQuery(t).hide().fadeIn("slow");jQuery(".frm_repeat_"+e+":last").after(r);var n,a=["other"],l="reset";addingRow=r.attr("id"),jQuery(t).find("input, select, textarea").each(function(){"file"!=this.type&&(n=this.name.replace("item_meta[","").split("]")[2].replace("[",""),-1==jQuery.inArray(n,a)&&(a.push(n),checkDependentField(n,null,jQuery(this),l),doCalculation(n,jQuery(this)),l="persist"))}),addingRow="";for(var d=i.logic.check.length,o=0,f=d;f>o;o++)-1==jQuery.inArray(i.logic.check[o],a)&&jQuery(t).find(".frm_field_"+i.logic.check[o]+"_container").length<1&&(checkDependentField(i.logic.check[o],null,null,l),l="persist");var s=jQuery(t).find(".star");s.length>0&&jQuery(".star").rating();var c=jQuery(t).find(".frm_chzn");c.length>0&&jQuery().chosen&&jQuery(".frm_chzn").chosen({allow_single_deselect:!0}),"function"==typeof frmThemeOverride_frmAddRow&&frmThemeOverride_frmAddRow(e,i)}}),!1}function fadeOut(e){e.fadeOut("slow",function(){e.remove()})}function toggleDiv(){var e=jQuery(this).data("frmtoggle");return jQuery(e).is(":visible")?jQuery(e).slideUp("fast"):jQuery(e).slideDown("fast"),!1}function empty(e){if(null!==e)for(;e.firstChild;)e.removeChild(e.firstChild)}function objectSearch(e,i){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===i)return t;return null}function isNotEmptyArray(e){return jQuery.isArray(e)&&(e.length>1||""!==e[0])}function isNumeric(e){return!jQuery.isArray(e)&&e-parseFloat(e)+1>=0}function getCheckedVal(e,i){var t=[];if("undefined"==typeof document.querySelector){var r=jQuery("#"+e+' input[type=checkbox]:checked, input[type=hidden][name^="'+i+'"]');r.each(function(){t.push(this.value)})}else for(var n=document.querySelectorAll("#"+e+' input[type=checkbox], input[type=hidden][name^="'+i+'"]'),a=0;a<n.length;a++)("checkbox"==n[a].type&&n[a].checked||"hidden"==n[a].type)&&t.push(n[a].value);return t}var show_fields=[],hide_later=[],hidden_fields=[],frm_checked_dep=[],addingRow="",action="",jsErrors=[];return{init:function(){jQuery(document).on("click",".frm_trigger",toggleSection);var e=jQuery(".frm_blank_field");e.length&&e.closest(".frm_toggle_container").prev(".frm_trigger").click(),jQuery.isFunction(jQuery.fn.placeholder)?jQuery(".frm-show-form input, .frm-show-form textarea").placeholder():jQuery(".frm-show-form input[onblur], .frm-show-form textarea[onblur]").each(function(){""===jQuery(this).val()&&jQuery(this).blur()}),jQuery(document).on("focus",".frm_toggle_default",clearDefault),jQuery(document).on("blur",".frm_toggle_default",replaceDefault),jQuery(".frm_toggle_default").blur(),jQuery(document.getElementById("frm_resend_email")).click(resendEmail),jQuery(document).on("change",".frm_multiple_file",nextUpload),jQuery(document).on("click",".frm_clear_file_link",clearFile),jQuery(document).on("click",".frm_remove_link",removeDiv),jQuery(document).on("focusin","input[data-frmmask]",function(){jQuery(this).mask(jQuery(this).data("frmmask").toString())
}),jQuery(document).on("change",'.frm-show-form input[name^="item_meta"], .frm-show-form select[name^="item_meta"], .frm-show-form textarea[name^="item_meta"]',maybeCheckDependent),jQuery(document).on("click",'.frm-show-form input[type="submit"], .frm-show-form input[name="frm_prev_page"], .frm-show-form .frm_save_draft',setNextPage),jQuery(document).on("change",'.frm_other_container input[type="checkbox"], .frm_other_container input[type="radio"], .frm_other_container select',showOtherText),jQuery(document).on("change","input[type=file].frm_transparent",showFileUploadText),jQuery(document).on("click",".frm_remove_form_row",removeRow),jQuery(document).on("click",".frm_add_form_row",addRow),jQuery("a[data-frmtoggle]").click(toggleDiv),jQuery(".frm_month_heading, .frm_year_heading").click(function(){var e=jQuery(this).children(".ui-icon-triangle-1-e, .ui-icon-triangle-1-s");e.hasClass("ui-icon-triangle-1-e")?(e.addClass("ui-icon-triangle-1-s").removeClass("ui-icon-triangle-1-e"),jQuery(this).next(".frm_toggle_container").fadeIn("slow")):(e.addClass("ui-icon-triangle-1-e").removeClass("ui-icon-triangle-1-s"),jQuery(this).next(".frm_toggle_container").hide())})},submitForm:function(e){e.preventDefault(),jQuery(this).find(".wp-editor-wrap").length&&"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var i=this;if(action=jQuery(i).find('input[name="frm_action"]').val(),jsErrors=[],frmFrontForm.getAjaxFormErrors(i),0===Object.keys(jsErrors).length)getFormErrors(i,action);else{jQuery(".form-field").removeClass("frm_blank_field"),jQuery(".form-field .frm_error").replaceWith("");for(var t in jsErrors){var r=jQuery(i).find(jQuery("#frm_field_"+t+"_container"));addFieldError(r,t,jsErrors)}}},getAjaxFormErrors:function(e){"function"==typeof frmThemeOverride_jsErrors&&(jsErrors=frmThemeOverride_jsErrors(action,e))},checkFormErrors:function(e,i){getFormErrors(e,i)},scrollToID:function(e){var i=jQuery(document.getElementById(e).offset());window.scrollTo(i.left,i.top)},scrollMsg:function(e,i,t){var r="";if(r="undefined"==typeof i?jQuery(document.getElementById("frm_form_"+e+"_container")).offset().top:jQuery(i).find(document.getElementById("frm_field_"+e+"_container")).offset().top){r-=frm_js.offset;var n=jQuery("html").css("margin-top"),a=jQuery("body").css("margin-top");if((n||a)&&(r=r-parseInt(n)-parseInt(a)),r&&window.innerHeight){var l=document.documentElement.scrollTop||document.body.scrollTop,d=l+window.innerHeight;if(r>d||l>r)return"undefined"==typeof t?jQuery(window).scrollTop(r):jQuery("html,body").animate({scrollTop:r},500),!1}}},hideCondFields:function(e){e=JSON.parse(e);for(var i=e.length,t=0,r=i;r>t;t++){var n=document.getElementById("frm_field_"+e[t]+"_container");null!==n?n.style.display="none":jQuery(".frm_field_"+e[t]+"_container").hide()}},checkDependent:function(e){e=JSON.parse(e);for(var i=e.length,t="reset",r=0,n=i;n>r;r++)checkDependentField(e[r],null,null,t),t="persist"},loadGoogle:function(){if("undefined"!=typeof google&&google&&google.load)for(var e=__FRMTABLES,i=Object.keys(e),t=0;t<i.length;t++)prepareGraphTypes(e[i[t]],i[t]);else setTimeout(frmFrontForm.loadGoogle,30)},removeUsedTimes:function(e,i){var t=jQuery(e).parents("form:first").find('input[name="id"]');jQuery.ajax({type:"POST",url:frm_js.ajax_url,dataType:"json",data:{action:"frm_fields_ajax_time_options",time_field:i,date_field:e.id,entry_id:t?t.val():"",date:jQuery(e).val(),nonce:frm_js.nonce},success:function(e){var t=jQuery(document.getElementById(i));if(t.find("option").removeAttr("disabled"),e&&""!==e)for(var r in e)t.find('option[value="'+r+'"]').attr("disabled","disabled")}})},escapeHtml:function(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},invisible:function(e){jQuery(e).css("visibility","hidden")},visible:function(e){jQuery(e).css("visibility","visible")}}}function frmEditEntry(e,i,t,r,n,a){var l=jQuery(document.getElementById("frm_edit_"+e)),d=l.html(),o=jQuery(document.getElementById(i+e)),f=o.html();o.html('<span class="frm-loading-img" id="'+i+e+'"></span><div class="frm_orig_content" style="display:none">'+f+"</div>"),jQuery.ajax({type:"POST",url:frm_js.ajax_url,dataType:"html",data:{action:"frm_entries_edit_entry_ajax",post_id:t,entry_id:e,id:r,nonce:frm_js.nonce},success:function(f){o.children(".frm-loading-img").replaceWith(f),l.replaceWith('<span id="frm_edit_'+e+'"><a onclick="frmCancelEdit('+e+",'"+i+"','"+frmFrontForm.escapeHtml(d)+"',"+t+","+r+",'"+a+'\')" class="'+a+'">'+n+"</a></span>")}})}function frmCancelEdit(e,i,t,r,n,a){var l=jQuery(document.getElementById("frm_edit_"+e)),d=l.find("a"),o=d.html();if(!d.hasClass("frm_ajax_edited")){var f=jQuery(document.getElementById(i+e));f.children(".frm_forms").replaceWith(""),f.children(".frm_orig_content").fadeIn("slow").removeClass("frm_orig_content")}l.replaceWith('<a id="frm_edit_'+e+'" class="frm_edit_link '+a+'" href="javascript:frmEditEntry('+e+",'"+i+"',"+r+","+n+",'"+frmFrontForm.escapeHtml(o)+"','"+a+"')\">"+t+"</a>")}function frmUpdateField(e,i,t,r,n){jQuery(document.getElementById("frm_update_field_"+e+"_"+i)).html('<span class="frm-loading-img"></span>'),jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_update_field_ajax",entry_id:e,field_id:i,value:t,nonce:frm_js.nonce},success:function(){""===r.replace(/^\s+|\s+$/g,"")?jQuery(document.getElementById("frm_update_field_"+e+"_"+i+"_"+n)).fadeOut("slow"):jQuery(document.getElementById("frm_update_field_"+e+"_"+i+"_"+n)).replaceWith(r)}})}function frmDeleteEntry(e,i){jQuery(document.getElementById("frm_delete_"+e)).replaceWith('<span class="frm-loading-img" id="frm_delete_'+e+'"></span>'),jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_destroy",entry:e,nonce:frm_js.nonce},success:function(t){"success"==t.replace(/^\s+|\s+$/g,"")?jQuery(document.getElementById(i+e)).fadeOut("slow"):jQuery(document.getElementById("frm_delete_"+e)).replaceWith(t)}})}function frmOnSubmit(e){console.warn("DEPRECATED: function frmOnSubmit in v2.0 use frmFrontForm.submitForm"),frmFrontForm.submitForm(e,this)}function frm_resend_email(e,i){console.warn("DEPRECATED: function frm_resend_email in v2.0"),$link=jQuery(document.getElementById("frm_resend_email")),$link.append('<span class="spinner" style="display:inline"></span>'),jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_send_email",entry_id:e,form_id:i,nonce:frm_js.nonce},success:function(e){$link.replaceWith(e)}})}var frmFrontForm=frmFrontFormJS();jQuery(document).ready(function(){frmFrontForm.init()});